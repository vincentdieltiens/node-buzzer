{"version":3,"sources":["web-test.js"],"names":["wsPort","port","app","use","static","dirname","__filename","engine","defaultLayout","layoutsDir","set","get","request","response","render","listen","console","log","buzzer","addEventListener","max","controllersCount","i","lightOff","e","onPress","controllerIndex","buttonIndex","blink","connect"],"mappings":"AAAA;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA,IAAIA,SAAS,IAAb;;AAEA;AACA;AACA;AACA,IAAIC,OAAO,IAAX;AACA,IAAIC,MAAM,wBAAV;;AAEAA,IAAIC,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,eAAKC,OAAL,CAAaC,UAAb,IAAyB,SAAxC,CAAR;AACAJ,IAAIK,MAAJ,CAAW,YAAX,EAAyB,iCAAO;AAC/BC,gBAAe,MADgB;AAE/BC,aAAY,eAAKJ,OAAL,CAAaC,UAAb,IAAyB;AAFN,CAAP,CAAzB;AAIAJ,IAAIQ,GAAJ,CAAQ,OAAR,EAAiB,eAAKL,OAAL,CAAaC,UAAb,IAAyB,QAA1C;AACAJ,IAAIQ,GAAJ,CAAQ,aAAR,EAAuB,YAAvB;AACAR,IAAIS,GAAJ,CAAQ,GAAR,EAAa,UAACC,OAAD,EAAUC,QAAV,EAAuB;AACnC,QAAOA,SAASC,MAAT,CAAgB,QAAhB,EAA0B;AAChCb,QAAMD;AAD0B,EAA1B,CAAP;AAGA,CAJD;AAKAE,IAAIa,MAAJ,CAAWd,IAAX,EAAiB,YAAM;AACtBe,SAAQC,GAAR,CAAY,4BAA0BhB,IAAtC;AACAe,SAAQC,GAAR,CAAY,4BAA0BhB,IAAtC;AACA,CAHD;;AAKA,IAAIiB,SAAS,mBAAchB,GAAd,EAAmBF,MAAnB,CAAb;;AAEAkB,OAAOC,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACtCH,SAAQC,GAAR,CAAY,gCAAZ;AACA,KAAIG,MAAMF,OAAOG,gBAAP,EAAV;;AAEA;AACA,MAAI,IAAIC,IAAE,CAAV,EAAaA,IAAIF,GAAjB,EAAsBE,GAAtB,EAA2B;AAC1BJ,SAAOK,QAAP,CAAgBD,CAAhB;AACA;AACD,CARD;;AAUAJ,OAAOC,gBAAP,CAAwB,OAAxB,EAAiC,UAACK,CAAD,EAAO;AACvCR,SAAQC,GAAR,CAAY,UAAZ,EAAwBO,CAAxB;AACA,CAFD;;AAIAN,OAAOC,gBAAP,CAAwB,OAAxB,EAAiC,UAACK,CAAD,EAAO;AACvCR,SAAQC,GAAR,CAAY,UAAZ,EAAwBO,CAAxB;AACA,CAFD;;AAIAN,OAAOO,OAAP,CAAe,UAACC,eAAD,EAAkBC,WAAlB,EAAkC;AAChDX,SAAQC,GAAR,CAAY,QAAZ,EAAsBS,eAAtB,EAAuCC,WAAvC;AACAT,QAAOU,KAAP,CAAaF,eAAb,EAA8B,CAA9B,EAAiC,GAAjC;AACA,CAHD;;AAKAR,OAAOW,OAAP,CAAe,IAAf","file":"web-test.js","sourcesContent":["'use strict';\n\nimport express from 'express';\nimport exphbs from 'express-handlebars';\nimport path from 'path';\n\nimport { WebBuzzer } from '../web';\n\nlet wsPort = 8124;\n\n//\n// Make express app\n//\nlet port = 8123;\nlet app = express();\n\napp.use(express.static(path.dirname(__filename)+'/public'));\napp.engine('handlebars', exphbs({\n\tdefaultLayout: 'main',\n\tlayoutsDir: path.dirname(__filename)+'/views/layouts'\n}));\napp.set('views', path.dirname(__filename)+'/views');\napp.set('view engine', 'handlebars');\napp.get('/', (request, response) => {\n\treturn response.render('buzzer', {\n\t\tport: wsPort\n\t})\n});\napp.listen(port, () => {\n\tconsole.log('Web app : listening on '+port);\n\tconsole.log('Go to http://127.0.0.1:'+port);\n});\n\nlet buzzer = new WebBuzzer(app, wsPort);\n\nbuzzer.addEventListener('ready', () => {\n\tconsole.log('Buzzer ready ! Push any button');\n\tlet max = buzzer.controllersCount();\n\n\t// Turn off all lights\n\tfor(var i=0; i < max; i++) {\n\t\tbuzzer.lightOff(i)\n\t}\n});\n\nbuzzer.addEventListener('error', (e) => {\n\tconsole.log('error...', e)\n});\n\nbuzzer.addEventListener('leave', (e) => {\n\tconsole.log('leave...', e)\n});\n\nbuzzer.onPress((controllerIndex, buttonIndex) => {\n\tconsole.log('buzz !', controllerIndex, buttonIndex);\n\tbuzzer.blink(controllerIndex, 2, 100)\n});\n\nbuzzer.connect(8000);\n"]}